---
import Layout from "../layouts/Layout.astro";

import { Image } from "astro:assets";

import prisma from "@main/prismaa";

const priority1 = await prisma.outstandingPosts.findFirst({
	where: { priority: 1 },
	include: { post: true },
});

const priority2 = await prisma.outstandingPosts.findFirst({
	where: { priority: 2 },
	include: { post: true },
});
const priority3 = await prisma.outstandingPosts.findFirst({
	where: { priority: 3 },
	include: { post: true },
});
const priority4 = await prisma.outstandingPosts.findFirst({
	where: { priority: 4 },
	include: { post: true },
});
const priority5 = await prisma.outstandingPosts.findFirst({
	where: { priority: 5 },
	include: { post: true },
});
const priority6 = await prisma.outstandingPosts.findFirst({
	where: { priority: 6 },
	include: { post: true },
});
---

<Layout title="Alba Blog">
	<main class="z-10">
		<section class="flex justify-center">
			<div
				class="items-center md:grid md:grid-cols-2 md:justify-center md:gap-4 md:place-items-center"
			>
				<div class="p-4 grid items-center md:h-full">
					{/* Post Principal */}
					<div class="p-4">
						<div class="flex justify-center mb-3">
							<Image
								class="rounded-lg w-full"
								src={priority2
									? priority2.post[0].tumble
										? priority2.post[0].tumble
										: "/img/testImages/testPost.jpeg"
									: "/img/testImages/testPost.jpeg"}
								width="512"
								height="512"
								alt="TumblePost"
							/>
						</div>
						<div class="text-center">
							<h1
								class="p-2 text-xl md:text-2xl text-center font-semibold dark:text-white"
							>
								{
									priority1
										? priority1.post[0].title
										: "Post with priority 1 not found."
								}
							</h1>
							<p
								class="mb-2 p-2 text-md md:text-xl text-gray-700 dark:text-gray-500"
							>
								{
									priority1
										? priority1.post[0].sdesc
										: "Post with priority 1 not found."
								}
							</p>
							<a
								href={priority1
									? `/post/${priority1.post[0].id}`
									: `#`}
								class="p-2 px-4 m-2 text-white bg-blue-500 rounded-md"
								>Leer más</a
							>
						</div>
					</div>
				</div>

				<div class="p-4 md:w-[85%] h-[50%] md:h-screen md:mt-10">
					{/* Destacado Secundario */}

					<div class="mb-5">
						<div class="flex justify-center mb-3">
							<Image
								class="rounded-lg w-[80%]"
								src={priority2
									? priority2.post[0].tumble
										? priority2.post[0].tumble
										: "/img/testImages/testPost.jpeg"
									: "/img/testImages/testPost.jpeg"}
								width="512"
								height="512"
								alt="TumblePost"
							/>
						</div>
						<div class="">
							<h1
								class="p-2 text-md text-center font-semibold dark:text-white"
							>
								{
									priority2
										? priority2.post[0].title
										: "Post with priority 2 not found."
								}
							</h1>
							<div class="flex justify-center">
								<a
									href={priority2
										? `/post/${priority2.post[0].id}`
										: `#`}
									class="p-2 px-4 m-2 bg-blue-500 text-white rounded-md"
									>Leer más</a
								>
							</div>
						</div>
					</div>

					{/* Secundarios */}
					<div class="md:grid md:grid-cols-2">
						<div class="mb-5 flex justify-center items-center">
							<Image
								class="rounded-lg w-1/3"
								src={priority3
									? priority3.post[0].tumble
										? priority3.post[0].tumble
										: "/img/testImages/testPost.jpeg"
									: "/img/testImages/testPost.jpeg"}
								width="512"
								height="512"
								alt="TumblePost"
							/>
							<div class="text-center w-1/2">
								<h1
									class="p-2 text-md text-center font-semibold dark:text-white"
								>
									{
										priority3
											? priority3.post[0].title
											: "Post with priority 3 not found."
									}
								</h1>
								<a
									href={priority3
										? `/post/${priority3.post[0].id}`
										: `#`}
									class="m-2 rounded-md border-b-2 border-black dark:border-white"
									>Leer más</a
								>
							</div>
						</div>

						<div class="mb-5 flex justify-center items-center">
							<Image
								class="rounded-lg w-1/3"
								src={priority4
									? priority4.post[0].tumble
										? priority4.post[0].tumble
										: "/img/testImages/testPost.jpeg"
									: "/img/testImages/testPost.jpeg"}
								width="512"
								height="512"
								alt="TumblePost"
							/>
							<div class="text-center w-1/2">
								<h1
									class="p-2 text-md text-center font-semibold dark:text-white"
								>
									{
										priority4
											? priority4.post[0].title
											: "Post with priority 4 not found."
									}
								</h1>
								<a
									href={priority4
										? `/post/${priority4.post[0].id}`
										: `#`}
									class="m-2 rounded-md border-b-2 border-black dark:border-white"
									>Leer más</a
								>
							</div>
						</div>

						<div class="mb-5 flex justify-center items-center">
							<Image
								class="rounded-lg w-1/3"
								src={priority5
									? priority5.post[0].tumble
										? priority5.post[0].tumble
										: "/img/testImages/testPost.jpeg"
									: "/img/testImages/testPost.jpeg"}
								width="512"
								height="512"
								alt="TumblePost"
							/>
							<div class="text-center w-1/2">
								<h1
									class="p-2 text-md text-center font-semibold dark:text-white"
								>
									{
										priority5
											? priority5.post[0].title
											: "Post with priority 5 not found."
									}
								</h1>
								<a
									href={priority5
										? `/post/${priority5.post[0].id}`
										: `#`}
									class="m-2 rounded-md border-b-2 border-black dark:border-white"
									>Leer más</a
								>
							</div>
						</div>

						<div class="mb-5 flex justify-center items-center">
							<Image
								class="rounded-lg w-1/3"
								src={priority6
									? priority6.post[0].tumble
										? priority6.post[0].tumble
										: "/img/testImages/testPost.jpeg"
									: "/img/testImages/testPost.jpeg"}
								width="512"
								height="512"
								alt="TumblePost"
							/>
							<div class="text-center w-1/2">
								<h1
									class="p-2 text-md text-center font-semibold dark:text-white"
								>
									{
										priority6
											? priority6.post[0].title
											: "Post with priority 6 not found."
									}
								</h1>
								<a
									href={priority6
										? `/post/${priority6.post[0].id}`
										: `#`}
									class="m-2 rounded-md border-b-2 border-black dark:border-white"
									>Leer más</a
								>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>
</Layout>

<style></style>
